!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fetch")):"function"==typeof define&&define.amd?define("BoxSdk",["fetch"],t):"object"==typeof exports?exports.BoxSdk=t(require("fetch")):e.BoxSdk=t(e.fetch)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={HEADER_AUTHORIZATION:"Authorization",HEADER_AUTHORIZATION_PREFIX:"Bearer ",HTTP_VERBS:{GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",OPTIONS:"OPTIONS"},MODES:{SKIP_VALIDATION:"skipValidation",IGNORE_MODEL_VALUES:"ignoreModelValues"},FOLDER:"folder",FOLDER_ID:"folderId",FILE:"file",FILE_ID:"fileId",VERSION:"version",VERSION_ID:"versionId",COMMENT:"comment",COMMENT_ID:"commentId",BOX_TOKEN_STORAGE_KEY:"box_token"},e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),s=o(0),a=r(s),l=o(15),u=r(l),c=o(8),p=r(c),f=o(16),d=r(f),_=o(3),h=r(_),y=o(2),g=r(y),b=o(4),m=r(b),v={SHARED_LINK:"shared_link",SHARED_LINK_ACCESS:"shared_link.access",UNSHARED_AT:"shared_link.unshared_at",PERMISSIONS:"shared_link.permissions",CAN_DOWNLOAD:"shared_link.permissions.can_download",CAN_PREVIEW:"shared_link.permissions.can_preview"},O=function(){function e(t,o){n(this,e),this.client=t,this.ALL_VALUES=o?(0,p.default)(o):null,this.FLATTENED_VALUES=this.ALL_VALUES?(0,d.default)(this.ALL_VALUES):null}return i(e,[{key:"_getModel",value:function(e,t,o,r){if(e.body)o||(0,g.default)(e.body,t),r||(0,h.default)(e.body,this.FLATTENED_VALUES);else{if(!e){t=t||this.ALL_VALUES;var n=t.join(", ");throw new Error("Please select from the following fields when making this API call: "+n)}o||(0,g.default)(e,t),r||(0,h.default)(e,this.FLATTENED_VALUES),e.body=(0,m.default)(e,this.ALL_VALUES,r)}}},{key:"_objectifyString",value:function(e){if("string"==typeof e){e={id:e}}return e}},{key:"_getId",value:function(e){var t="";return e.id?(t=e.id,delete e.id):"string"==typeof e&&(t=e,e={}),t}},{key:"_getFolderId",value:function(e){var t=this._getId(e);return e.folderId||e.folder_id?(t=e.folderId||e.folder_id,e.folderId?delete e.folderId:delete e.folder_id):e.folder&&e.folder.id&&(t=e.folder.id),this._testForMissingId(t,a.default.FOLDER,a.default.FOLDER_ID),t}},{key:"_getFileId",value:function(e){var t=this._getId(e);return e.fileId||e.file_id?(t=e.fileId||e.file_id,e.fileId?delete e.fileId:delete e.file_id):e.file&&e.file.id&&(t=e.file.id),this._testForMissingId(t,a.default.FILE,a.default.FILE_ID),t}},{key:"_getScope",value:function(e){var t="enterprise";return e.scope&&""!==e.scope&&(t=e.scope,delete e.scope),t}},{key:"_getTemplateKey",value:function(e){var t="";return e.template&&""!==e.template?(t=""!==e.template.key?e.template.key:e.template,delete e.template):(e.templateKey||e.template_key)&&(t=e.templateKey||e.template_key,e.templateKey?delete e.templateKey:delete e.template_key),t}},{key:"_testForMissingId",value:function(e,t,o){if(t=t||"unknown",o=o||"unknown",""===e)throw new Error("A(n) "+t+" field is required for this API call. Please provide an object with a key formatted in this style: "+o)}},{key:"_setSkipValidation",value:function(e){return(0,u.default)(e,a.default.MODES.SKIP_VALIDATION)||!1}},{key:"_setIgnoreModelValues",value:function(e){return(0,u.default)(e,a.default.MODES.IGNORE_MODEL_VALUES)||!1}},{key:"_createSharedLink",value:function(e,t,o,r){if(e=e||{},e.body=e.body||{},e.body.shared_link=e.body.shared_link||{},!this.client._simpleMode){var n=this._setSkipValidation(e);this._setIgnoreModelValues(e)||(0,h.default)(e,r),n||e[v.SHARED_LINK]&&(e.body[v.SHARED_LINK]=e[v.SHARED_LINK],delete e[v.SHARED_LINK])}var i=o+"/"+t;return e.method=a.default.HTTP_VERBS.PUT,this.client.makeRequest(i,e)}}]),e}();t.default=O,e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t=t||[],0!==t.length){var o=e;t.map(function(t){if(-1!==t.indexOf(".")){for(var r=t.split("."),n=0,i=r.length;n<i;n++){var s=r[n];o.hasOwnProperty(s)&&(o=o[s])}if(!o)throw new Error("A(n) "+t+" field is required for this API call")}else if(!e[t])throw new Error("A(n) "+t+" field is required for this API call")})}},e.exports=t.default},function(e,t,o){"use strict";function r(e,t){t=t||[],Object.keys(e).map(function(o){if(-1===t.indexOf(o)){"object"===n(e[o])&&r(e[o],t);var i=o.split(/(?=[A-Z])/g);if(i.length>1){for(var s=[],a=1;a<i.length;a++)s.push(i[a].toLowerCase());i.length>0&&s.unshift(i[0]);var l=s.join("_");-1!==t.indexOf(l)&&(e[l]=e[o],delete e[o])}}})}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r,e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o){return o=o||!1,t=t||[],o?(Object.keys(e).map(function(t){"body"!==t&&(e.body[t]=e[t],delete e[t])}),e.body):0===t.length&&!1===o?{}:(e.body=e.body||{},Object.keys(e).map(function(o){-1!==t.indexOf(o)&&"body"!==o&&(e.body[o]=e[o],delete e[o])}),e.body)},e.exports=t.default},function(e,t,o){!function(t,o){e.exports=o()}("undefined"!=typeof self&&self,function(){return function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,o){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=o(5),i=o(1),s=i.toHex,a=i.ceilHeapSize,l=o(6),u=function(e){for(e+=9;e%64>0;e+=1);return e},c=function(e,t){var o=new Uint8Array(e.buffer),r=t%4,n=t-r;switch(r){case 0:o[n+3]=0;case 1:o[n+2]=0;case 2:o[n+1]=0;case 3:o[n+0]=0}for(var i=1+(t>>2);i<e.length;i++)e[i]=0},p=function(e,t,o){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=o/(1<<29)|0,e[15+(2+(t>>2)&-16)]=o<<3},f=function(e,t){var o=new Int32Array(e,t+320,5),r=new Int32Array(5),n=new DataView(r.buffer);return n.setInt32(0,o[0],!1),n.setInt32(4,o[1],!1),n.setInt32(8,o[2],!1),n.setInt32(12,o[3],!1),n.setInt32(16,o[4],!1),r},d=function(){function e(t){if(r(this,e),(t=t||65536)%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=t,this._padMaxChunkLen=u(t),this._heap=new ArrayBuffer(a(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new n({Int32Array:Int32Array},{},this._heap)}return e.prototype._initState=function(e,t){this._offset=0;var o=new Int32Array(e,t+320,5);o[0]=1732584193,o[1]=-271733879,o[2]=-1732584194,o[3]=271733878,o[4]=-1009589776},e.prototype._padChunk=function(e,t){var o=u(e),r=new Int32Array(this._heap,0,o>>2);return c(r,e),p(r,e,t),o},e.prototype._write=function(e,t,o,r){l(e,this._h8,this._h32,t,o,r||0)},e.prototype._coreCall=function(e,t,o,r,n){var i=o;this._write(e,t,o),n&&(i=this._padChunk(o,r)),this._core.hash(i,this._padMaxChunkLen)},e.prototype.rawDigest=function(e){var t=e.byteLength||e.length||e.size||0;this._initState(this._heap,this._padMaxChunkLen);var o=0,r=this._maxChunkLen;for(o=0;t>o+r;o+=r)this._coreCall(e,o,r,t,!1);return this._coreCall(e,o,t-o,t,!0),f(this._heap,this._padMaxChunkLen)},e.prototype.digest=function(e){return s(this.rawDigest(e).buffer)},e.prototype.digestFromString=function(e){return this.digest(e)},e.prototype.digestFromBuffer=function(e){return this.digest(e)},e.prototype.digestFromArrayBuffer=function(e){return this.digest(e)},e.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},e.prototype.append=function(e){var t=0,o=e.byteLength||e.length||e.size||0,r=this._offset%this._maxChunkLen,n=void 0;for(this._offset+=o;t<o;)n=Math.min(o-t,this._maxChunkLen-r),this._write(e,t,n,r),r+=n,t+=n,r===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),r=0);return this},e.prototype.getState=function(){var e=this._offset%this._maxChunkLen,t=void 0;if(e)t=this._heap.slice(0);else{var o=new Int32Array(this._heap,this._padMaxChunkLen+320,5);t=o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}return{offset:this._offset,heap:t}},e.prototype.setState=function(e){if(this._offset=e.offset,20===e.heap.byteLength){new Int32Array(this._heap,this._padMaxChunkLen+320,5).set(new Int32Array(e.heap))}else this._h32.set(new Int32Array(e.heap));return this},e.prototype.rawEnd=function(){var e=this._offset,t=e%this._maxChunkLen,o=this._padChunk(t,e);this._core.hash(o,this._padMaxChunkLen);var r=f(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),r},e.prototype.end=function(){return s(this.rawEnd().buffer)},e}();e.exports=d,e.exports._core=n},function(e,t){for(var o=new Array(256),r=0;r<256;r++)o[r]=(r<16?"0":"")+r.toString(16);e.exports.toHex=function(e){for(var t=new Uint8Array(e),r=new Array(e.byteLength),n=0;n<r.length;n++)r[n]=o[t[n]];return r.join("")},e.exports.ceilHeapSize=function(e){var t=0;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t},e.exports.isDedicatedWorkerScope=function(e){var t="WorkerGlobalScope"in e&&e instanceof e.WorkerGlobalScope,o="SharedWorkerGlobalScope"in e&&e instanceof e.SharedWorkerGlobalScope,r="ServiceWorkerGlobalScope"in e&&e instanceof e.ServiceWorkerGlobalScope;return t&&!o&&!r}},function(e,t,o){e.exports=function(){var e=o(0),t=function(e,t,o){try{return o(null,e.digest(t))}catch(e){return o(e)}},r=function(e,t,o,n,i){var s=new self.FileReader;s.onloadend=function(){if(s.error)return i(s.error);var a=s.result;t+=s.result.byteLength;try{e.append(a)}catch(e){return void i(e)}t<n.size?r(e,t,o,n,i):i(null,e.end())},s.readAsArrayBuffer(n.slice(t,t+o))},n=!0;return self.onmessage=function(o){if(n){var i=o.data.data,s=o.data.file,a=o.data.id;if(void 0!==a&&(s||i)){var l=o.data.blockSize||4194304,u=new e(l);u.resetState();var c=function(e,t){e?self.postMessage({id:a,error:e.name}):self.postMessage({id:a,hash:t})};i&&t(u,i,c),s&&r(u,0,l,s,c)}}},function(){n=!1}}},function(e,t,o){var r=o(4),n=o(0),i=o(7),s=o(2),a=o(1),l=a.isDedicatedWorkerScope,u="undefined"!=typeof self&&l(self);n.disableWorkerBehaviour=u?s():function(){},n.createWorker=function(){var e=r(2),t=e.terminate;return e.terminate=function(){URL.revokeObjectURL(e.objectURL),t.call(e)},e},n.createHash=i,e.exports=n},function(e,t,o){function r(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw console.error(e),e};var r=t(t.s=ENTRY_MODULE);return r.default||r}function n(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function i(e,t,r){var i={};i[r]=[];var s=t.toString(),a=s.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!a)return i;for(var c,p=a[1],f=new RegExp("(\\\\n|\\W)"+n(p)+u,"g");c=f.exec(s);)"dll-reference"!==c[3]&&i[r].push(c[3]);for(f=new RegExp("\\("+n(p)+'\\("(dll-reference\\s('+l+'))"\\)\\)'+u,"g");c=f.exec(s);)e[c[2]]||(i[r].push(c[1]),e[c[2]]=o(c[1]).m),i[c[2]]=i[c[2]]||[],i[c[2]].push(c[4]);return i}function s(e){return Object.keys(e).reduce(function(t,o){return t||e[o].length>0},!1)}function a(e,t){for(var o={main:[t]},r={main:[]},n={main:{}};s(o);)for(var a=Object.keys(o),l=0;l<a.length;l++){var u=a[l],c=o[u],p=c.pop();if(n[u]=n[u]||{},!n[u][p]&&e[u][p]){n[u][p]=!0,r[u]=r[u]||[],r[u].push(p);for(var f=i(e,e[u][p],u),d=Object.keys(f),_=0;_<d.length;_++)o[d[_]]=o[d[_]]||[],o[d[_]]=o[d[_]].concat(f[d[_]])}}return r}var l="[\\.|\\-|\\+|\\w|/|@]+",u="\\((/\\*.*?\\*/)?s?.*?("+l+").*?\\)";e.exports=function(e,t){t=t||{};var n={main:o.m},i=t.all?{main:Object.keys(n)}:a(n,e),s="";Object.keys(i).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;i[e][t];)t++;i[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map(function(t){return JSON.stringify(t)+": "+n[e][t].toString()}).join(",")+"});\n"}),s=s+"("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map(function(e){return JSON.stringify(e)+": "+n.main[e].toString()}).join(",")+"})(self);";var l=new window.Blob([s],{type:"text/javascript"});if(t.bare)return l;var u=window.URL||window.webkitURL||window.mozURL||window.msURL,c=u.createObjectURL(l),p=new window.Worker(c);return p.objectURL=c,p}},function(e,t){e.exports=function(e,t,o){"use asm";var r=new e.Int32Array(o);function n(e,t){e=e|0;t=t|0;var o=0,n=0,i=0,s=0,a=0,l=0,u=0,c=0,p=0,f=0,d=0,_=0,h=0,y=0;i=r[t+320>>2]|0;a=r[t+324>>2]|0;u=r[t+328>>2]|0;p=r[t+332>>2]|0;d=r[t+336>>2]|0;for(o=0;(o|0)<(e|0);o=o+64|0){s=i;l=a;c=u;f=p;_=d;for(n=0;(n|0)<64;n=n+4|0){y=r[o+n>>2]|0;h=((i<<5|i>>>27)+(a&u|~a&p)|0)+((y+d|0)+1518500249|0)|0;d=p;p=u;u=a<<30|a>>>2;a=i;i=h;r[e+n>>2]=y}for(n=e+64|0;(n|0)<(e+80|0);n=n+4|0){y=(r[n-12>>2]^r[n-32>>2]^r[n-56>>2]^r[n-64>>2])<<1|(r[n-12>>2]^r[n-32>>2]^r[n-56>>2]^r[n-64>>2])>>>31;h=((i<<5|i>>>27)+(a&u|~a&p)|0)+((y+d|0)+1518500249|0)|0;d=p;p=u;u=a<<30|a>>>2;a=i;i=h;r[n>>2]=y}for(n=e+80|0;(n|0)<(e+160|0);n=n+4|0){y=(r[n-12>>2]^r[n-32>>2]^r[n-56>>2]^r[n-64>>2])<<1|(r[n-12>>2]^r[n-32>>2]^r[n-56>>2]^r[n-64>>2])>>>31;h=((i<<5|i>>>27)+(a^u^p)|0)+((y+d|0)+1859775393|0)|0;d=p;p=u;u=a<<30|a>>>2;a=i;i=h;r[n>>2]=y}for(n=e+160|0;(n|0)<(e+240|0);n=n+4|0){y=(r[n-12>>2]^r[n-32>>2]^r[n-56>>2]^r[n-64>>2])<<1|(r[n-12>>2]^r[n-32>>2]^r[n-56>>2]^r[n-64>>2])>>>31;h=((i<<5|i>>>27)+(a&u|a&p|u&p)|0)+((y+d|0)-1894007588|0)|0;d=p;p=u;u=a<<30|a>>>2;a=i;i=h;r[n>>2]=y}for(n=e+240|0;(n|0)<(e+320|0);n=n+4|0){y=(r[n-12>>2]^r[n-32>>2]^r[n-56>>2]^r[n-64>>2])<<1|(r[n-12>>2]^r[n-32>>2]^r[n-56>>2]^r[n-64>>2])>>>31;h=((i<<5|i>>>27)+(a^u^p)|0)+((y+d|0)-899497514|0)|0;d=p;p=u;u=a<<30|a>>>2;a=i;i=h;r[n>>2]=y}i=i+s|0;a=a+l|0;u=u+c|0;p=p+f|0;d=d+_|0}r[t+320>>2]=i;r[t+324>>2]=a;r[t+328>>2]=u;r[t+332>>2]=p;r[t+336>>2]=d}return{hash:n}}},function(e,t){var o=this,r=void 0;"undefined"!=typeof self&&void 0!==self.FileReaderSync&&(r=new self.FileReaderSync);var n=function(e,t,o,r,n,i){var s=void 0,a=i%4,l=(n+a)%4,u=n-l;switch(a){case 0:t[i]=e.charCodeAt(r+3);case 1:t[i+1-(a<<1)|0]=e.charCodeAt(r+2);case 2:t[i+2-(a<<1)|0]=e.charCodeAt(r+1);case 3:t[i+3-(a<<1)|0]=e.charCodeAt(r)}if(!(n<l+(4-a))){for(s=4-a;s<u;s=s+4|0)o[i+s>>2]=e.charCodeAt(r+s)<<24|e.charCodeAt(r+s+1)<<16|e.charCodeAt(r+s+2)<<8|e.charCodeAt(r+s+3);switch(l){case 3:t[i+u+1|0]=e.charCodeAt(r+u+2);case 2:t[i+u+2|0]=e.charCodeAt(r+u+1);case 1:t[i+u+3|0]=e.charCodeAt(r+u)}}},i=function(e,t,o,r,n,i){var s=void 0,a=i%4,l=(n+a)%4,u=n-l;switch(a){case 0:t[i]=e[r+3];case 1:t[i+1-(a<<1)|0]=e[r+2];case 2:t[i+2-(a<<1)|0]=e[r+1];case 3:t[i+3-(a<<1)|0]=e[r]}if(!(n<l+(4-a))){for(s=4-a;s<u;s=s+4|0)o[i+s>>2|0]=e[r+s]<<24|e[r+s+1]<<16|e[r+s+2]<<8|e[r+s+3];switch(l){case 3:t[i+u+1|0]=e[r+u+2];case 2:t[i+u+2|0]=e[r+u+1];case 1:t[i+u+3|0]=e[r+u]}}},s=function(e,t,o,n,i,s){var a=void 0,l=s%4,u=(i+l)%4,c=i-u,p=new Uint8Array(r.readAsArrayBuffer(e.slice(n,n+i)));switch(l){case 0:t[s]=p[3];case 1:t[s+1-(l<<1)|0]=p[2];case 2:t[s+2-(l<<1)|0]=p[1];case 3:t[s+3-(l<<1)|0]=p[0]}if(!(i<u+(4-l))){for(a=4-l;a<c;a=a+4|0)o[s+a>>2|0]=p[a]<<24|p[a+1]<<16|p[a+2]<<8|p[a+3];switch(u){case 3:t[s+c+1|0]=p[c+2];case 2:t[s+c+2|0]=p[c+1];case 1:t[s+c+3|0]=p[c]}}};e.exports=function(e,t,r,a,l,u){if("string"==typeof e)return n(e,t,r,a,l,u);if(e instanceof Array)return i(e,t,r,a,l,u);if(o&&o.Buffer&&o.Buffer.isBuffer(e))return i(e,t,r,a,l,u);if(e instanceof ArrayBuffer)return i(new Uint8Array(e),t,r,a,l,u);if(e.buffer instanceof ArrayBuffer)return i(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t,r,a,l,u);if(e instanceof Blob)return s(e,t,r,a,l,u);throw new Error("Unsupported data type.")}},function(e,t,o){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=o(0),i=o(1),s=i.toHex,a=function(){function e(){r(this,e),this._rusha=new n,this._rusha.resetState()}return e.prototype.update=function(e){return this._rusha.append(e),this},e.prototype.digest=function(e){var t=this._rusha.rawEnd().buffer;if(!e)return t;if("hex"===e)return s(t);throw new Error("unsupported digest encoding")},e}();e.exports=function(){return new a}}])})},function(e,t,o){"use strict";function r(e){function t(e){var t=void 0;t=e.statusText?new Error(e.statusText):new Error("Unknown");var o=void 0;try{o=i(e.getAllResponseHeaders())}catch(t){o=e.getAllResponseHeaders()}var r=void 0;if(e.response)try{r=JSON.parse(e.response)}catch(t){r=e.response}else r={};return t.response={},t.response.headers=o,t.response.status=e.status,t.response.statusText=e.statusText,t.response.data=r,t}function o(e){if(!e.ok){var t=new Error(e.statusText);if(e)return e.json().catch(function(){return{}}).then(function(o){throw t.response={},0===Object.keys(o).length?t.response=e:t.response=o,t})}return e}function r(e,t){var o=!1;if(t.hasOwnProperty("verbose")&&(o=t.verbose,delete t.verbose),o&&(console.log("options"),console.log(t),console.log("response"),console.log(e)),t&&t.includeFullResponse){if(e.data&&e.headers&&e.status)return new Promise(function(t,o){t(e)});var r={data:{},headers:{},status:""};return new Promise(function(t,o){var n=e.headers,i=void 0;if(n&&n.entries&&"function"==typeof n.entries){i={};for(var l=n.entries(),u=l.next();!u.done;)u.value&&u.value.length&&2===u.value.length&&(i[u.value[0]]=u.value[1]),u=l.next()}else i=e.headers;return r.headers=i,r.status=e.status,s(e)?e.json().catch(function(){return{}}).then(function(e){r.data=e,t(r)}):a(e)?new Promise(function(t,o){r.data=e.data,t(r)}):void t(r)})}return s(e)?e.json().catch(function(){return{}}):a(e)?new Promise(function(t,o){t(e.data)}):new Promise(function(e,t){e({})})}function i(e){var t={};if(!e)return t;for(var o=e.split("\r\n"),r=0;r<o.length;r++){var n=o[r],i=n.indexOf(": ");if(i>0){var s=n.substring(0,i).toLowerCase(),a=n.substring(i+2);t[s]=a}}return t}function s(e){return!(!e.json||"function"!=typeof e.json)}function a(e){return!(!e.data||"object"!==n(e.data))}if(e.upload)return new Promise(function(o,r){var n=new XMLHttpRequest,i=e.url,s=e.method;n.open(s,i,!0),e.headers&&(e.headers["Content-Type"]&&delete e.headers["Content-Type"],Object.keys(e.headers).forEach(function(t){n.setRequestHeader(t,e.headers[t])})),n.send(e.body),n.onload=function(){n.status>=200&&n.status<300?o(JSON.parse(n.response)):r(t(n))},n.onerror=function(){r(t(n))}});if(!e.useXHR&&window&&window.fetch)return fetch(e.url,e).then(o).then(function(t){return r(t,e)});var l=new XMLHttpRequest,u=new Promise(function(o,n){var s=e.url,a=e.method;l.open(a,s,!0),Object.keys(e.headers).forEach(function(t){l.setRequestHeader(t,e.headers[t])}),l.send(e.body),l.onload=function(){if(l.status>=200&&l.status<300){var s=l.response?JSON.parse(l.response):{},a=void 0;try{a=i(l.getAllResponseHeaders())}catch(e){a=l.getAllResponseHeaders()}var u={data:s,headers:a,status:l.status,statusText:l.statusText};o(r(u,e))}else e.hasOwnProperty("verbose")&&e.verbose&&console.log(l.getAllResponseHeaders()),n(t(l))},l.onerror=function(){n(t(l))}});if(e.returnCancelToken){return{promise:u,abort:function(){l.abort()}}}return u}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r,o(12),e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),a=o(14),l=r(a),u=o(17),c=r(u),p=o(22),f=r(p),d=o(23),_=r(d),h=o(24),y=r(h),g=o(25),b=r(g),m=o(26),v=r(m),O=o(27),k=r(O),E=o(28),T=r(E),P=o(29),S=r(P),w=o(30),I=r(w),j=o(0),R=r(j),A=o(6),C=r(A),L=function(){function e(t){n(this,e),this._folders=new l.default(this),this._files=new c.default(this),this._webLinks=new f.default(this),this._collaborations=new _.default(this),this._collections=new y.default(this),this._comments=new b.default(this),this._groups=new v.default(this),this._metadata=new k.default(this),this._search=new T.default(this),this._tasks=new S.default(this),this._users=new I.default(this),this._baseApiUrl=t.baseUrl||"https://api.box.com/2.0",this._returnsOnlyOptions=!(!t.hasOwnProperty("noRequestMode")||!0!==t.noRequestMode),this._skipValidation=!(!t.hasOwnProperty("skipValidation")||!0!==t.skipValidation),this._simpleMode=!(!t.hasOwnProperty("simpleMode")||!0!==t.simpleMode),this._accessToken=this._checkTokenType(t),this._hasStoredAccessToken=!!this._accessToken,this._verbose=!(!t.hasOwnProperty("verbose")||!0!==t.verbose),this.httpService=t.httpService||C.default,this.Promise=t.Promise||Promise}return s(e,[{key:"_checkTokenType",value:function(e,t){if(t=t||!1,e&&"string"==typeof e)return e;var o=void 0;return e&&"object"===(void 0===e?"undefined":i(e))&&(e.hasOwnProperty("accessToken")&&(o=e.accessToken,t&&delete e.accessToken),e.hasOwnProperty("access_token")&&(o=e.access_token,t&&delete e.access_token)),o}},{key:"_handleAuthorization",value:function(e,t){if(t)return this._constructHeaders(e,t);if(e&&e.accessToken||e.access_token){var o=e.accessToken||e.access_token;return e.accessToken?delete e.accessToken:delete e.access_token,this._constructHeaders(e,o)}if(this._hasStoredAccessToken)return this._constructHeaders(e,this._accessToken);var r=this._checkTokenType(e,!0);return this._constructHeaders(e,r)}},{key:"_constructHeaders",value:function(e,t){var o={};return t&&(o[R.default.HEADER_AUTHORIZATION]=this._constructAuthorizationHeader(t)),e.headers&&Object.assign(o,e.headers),o}},{key:"_constructAuthorizationHeader",value:function(e){return""+R.default.HEADER_AUTHORIZATION_PREFIX+e}},{key:"_checkForEmptyObjects",value:function(e){var t=this;Object.keys(e).map(function(o){"body"!==o&&"upload"!==o&&"chunkedUpload"!==o&&"useXHR"!==o&&"returnCancelToken"!==o&&"returnsOnlyOptions"!==o&&"includeFullResponse"!==o&&t._isEmpty(e[o])&&delete e[o]})}},{key:"_isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"_applyFields",value:function(e){return e.params=e.params||{},e.fields&&(e.params.fields=e.fields,delete e.fields),e.params}},{key:"_formatOptions",value:function(e){if(e.chunkedUpload)return e;var t={};e.useXHR&&(t.useXHR=!0),e.returnCancelToken&&(t.returnCancelToken=!0),e.includeFullResponse&&(t.includeFullResponse=!0);var o=e.url;return e.params&&(o+="?",o+=Object.keys(e.params).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e.params[t])}).join("&")),t.url=o,t.headers=e.headers,e.upload?(e.headers["Content-Type"]="multipart/form-data",e.mode="cors",e):(e.body&&"object"===i(e.body)&&!e.upload&&(t.body=JSON.stringify(e.body),t.headers["Content-Type"]||(t.headers["Content-Type"]="application/json;charset=UTF-8")),t.method=e.method,t.data=e.body,t.mode="cors",t)}},{key:"_handleAngularFileUpload",value:function(e,t){return t.headers["Content-Type"]=void 0,e.post(t.url,t.body,{headers:t.headers})}},{key:"folders",get:function(){return this._folders}},{key:"files",get:function(){return this._files}},{key:"webLinks",get:function(){return this._webLinks}},{key:"collaborations",get:function(){return this._collaborations}},{key:"collections",get:function(){return this._collections}},{key:"comments",get:function(){return this._comments}},{key:"groups",get:function(){return this._groups}},{key:"metadata",get:function(){return this._metadata}},{key:"search",get:function(){return this._search}},{key:"tasks",get:function(){return this._tasks}},{key:"users",get:function(){return this._users}}]),e}();t.default=L,e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).map(function(t){return e[t]})},e.exports=t.default},function(e,t,o){"use strict";function r(e){for(var t,o,r,n,i,s="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=new Uint8Array(e),u=l.byteLength,c=u%3,p=u-c,f=0;f<p;f+=3)i=l[f]<<16|l[f+1]<<8|l[f+2],t=(16515072&i)>>18,o=(258048&i)>>12,r=(4032&i)>>6,n=63&i,s+=a[t]+a[o]+a[r]+a[n];return 1==c?(i=l[p],t=(252&i)>>2,o=(3&i)<<4,s+=a[t]+a[o]+"=="):2==c&&(i=l[p]<<8|l[p+1],t=(64512&i)>>10,o=(1008&i)>>4,r=(15&i)<<2,s+=a[t]+a[o]+a[r]+"="),s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!!(window&&window.FileReader||FileReader)},e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),s=o(6),a=(r(s),o(13)),l=r(a),u=o(31),c=r(u),p=function(){function e(){n(this,e),this._BasicBoxClient=l.default,this._PersistentBoxClient=c.default}return i(e,[{key:"BasicBoxClient",get:function(){return this._BasicBoxClient}},{key:"PersistentBoxClient",get:function(){return this._PersistentBoxClient}}]),e}();t.default=p,e.exports=t.default},function(t,o){t.exports=e},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=o(7),u=r(l),c=o(0),p=r(c),f=function(e){function t(e){return n(this,t),e=e||{},i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),a(t,[{key:"makeRequest",value:function(e,t){return t=t||{},t.url=t.url||""+this._baseApiUrl+e,t.headers=this._handleAuthorization(t),t.params=this._applyFields(t),this._checkForEmptyObjects(t),t=this._formatOptions(t),this._returnsOnlyOptions||t.returnsOnlyOptions?(t.upload&&(t.headers["Content-Type"]=void 0,delete t.upload),t):this.httpService.defaults&&t.upload?this._handleAngularFileUpload(this.httpService,t):(t.verbose=this._verbose,this.httpService(t))}},{key:"removeAccessTokenAndRerunRequest",value:function(e,t,o){return o=o||!1,e.setAsNewAccessToken&&(o=e.setAsNewAccessToken,delete e.setAsNewAccessToken),t||(t=this._checkTokenType(e,!0)),e.headers&&e.headers[p.default.HEADER_AUTHORIZATION]&&delete e.headers[p.default.HEADER_AUTHORIZATION],this.removeAccessToken(),o&&(this.removeAccessToken(),this._accessToken=this._checkTokenType(t),this._hasStoredAccessToken=!0),e.headers=this._handleAuthorization(e,t),e=this._formatOptions(e),BoxHttp(e)}},{key:"removeAccessToken",value:function(){this._accessToken=null,this._hasStoredAccessToken=!1}}]),t}(u.default);t.default=f,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=o(0),c=r(u),p=o(2),f=r(p),d=o(4),_=r(d),h=o(3),y=r(h),g=o(1),b=r(g),m={NAME:"name",PARENT:"parent",ID:"parent.id",DESCRIPTION:"description",SHARED_LINK:"shared_link",SHARED_LINK_ACCESS:"shared_link.access",UNSHARED_AT:"shared_link.unshared_at",PASSWORD:"shared_link.password",PERMISSIONS:"shared_link.permissions",CAN_DOWNLOAD:"shared_link.permissions.can_download",CAN_PREVIEW:"shared_link.permissions.can_preview",FOLDER_UPLOAD_EMAIL:"folder_upload_email",FOLDER_UPLOAD_EMAIL_ACCESS:"folder_upload_email.access",OWNED_BY:"owned_by",OWNED_BY_ID:"owned_by.id",SYNC_STATE:"sync_state",TAGS:"tags"},v=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,m))}return s(t,e),a(t,[{key:"_getFolder",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.folder?(r||(0,f.default)(e.folder,o),n||(0,y.default)(e.folder,this.FLATTENED_VALUES),e.body=(0,_.default)(e.folder,this.ALL_VALUES,n),delete e.folder):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r="/folders/"+o;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getItems",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r="/folders/"+o+"/items";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getCollaborations",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r="/folders/"+o+"/collaborations";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTrashedItems",value:function(e){e=e||{};return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest("/folders/trash/items",e)}},{key:"getTrashedFolder",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r="/folders/"+o+"/trash";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[m.PARENT,m.ID,m.NAME],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,o,r,n)}return e.method=c.default.HTTP_VERBS.POST,this.client.makeRequest("/folders",e)}},{key:"update",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,[],r,n)}var i="/folders/"+o;return e.method=c.default.HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"copy",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e),i=[m.PARENT,m.ID];this._getFolder(e,i,r,n),e.newName&&(e.body.name=e.newName,delete e.newName)}var s="/folders/"+o+"/copy";return e.method=c.default.HTTP_VERBS.POST,this.client.makeRequest(s,e)}},{key:"createSharedLink",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_createSharedLink",this).call(this,e,o,"/folders",this.FLATTENED_VALUES)}},{key:"updateCollections",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);e.collections&&(e.body.collections=e.collections,delete e.collections);var r="/folders/"+o;return e.method=c.default.HTTP_VERBS.PUT,this.client.makeRequest(r,e)}},{key:"restore",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,[],r,n)}var i="/folders/"+o;return e.method=c.default.HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"delete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{},e.params=e.params||{},e.params.recursive=e.params.recursive||!0;var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r="/folders/"+o;return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}},{key:"permanentlyDelete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r="/folders/"+o+"/trash";return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}}]),t}(b.default);t.default=v,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(8),i=r(n),s=o(0),a=r(s),l=(0,i.default)(a.default.MODES);t.default=function(e,t){var o=void 0;return-1!==l.indexOf(t)&&(o=e[t],delete e[t]),o},e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e=Array.prototype.concat.apply([],e.map(function(t){if(-1!==t.indexOf(".")){return t.split(".").filter(function(t){return-1===e.indexOf(t)})}return t}))},e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=o(18),c=r(u),p=o(0),f=r(p),d=o(2),_=r(d),h=o(4),y=r(h),g=o(3),b=r(g),m=o(1),v=r(m),O=o(19),k=r(O),E=o(20),T=r(E),P=o(21),S=r(P),w="lock",I="https://upload.box.com/api/2.0",j={NAME:"name",PARENT:"parent",ID:"parent.id",DESCRIPTION:"description",SHARED_LINK:"shared_link",SHARED_LINK_ACCESS:"shared_link.access",UNSHARED_AT:"shared_link.unshared_at",PERMISSIONS:"shared_link.permissions",CAN_DOWNLOAD:"shared_link.permissions.can_download",CAN_PREVIEW:"shared_link.permissions.can_preview",FOLDER_UPLOAD_EMAIL:"folder_upload_email",FOLDER_UPLOAD_EMAIL_ACCESS:"folder_upload_email.access",OWNED_BY:"owned_by",OWNED_BY_ID:"owned_by.id",SYNC_STATE:"sync_state",TAGS:"tags",SIZE:"size"},R={MIN_HEIGHT:"min_height",MAX_HEIGHT:"max_height",MIN_WIDTH:"min_width",MAX_WIDTH:"max_width"},A=Object.keys(R).map(function(e){return R[e]}),C=function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,j));return o.UPLOAD_PATH=I,o}return s(t,e),a(t,[{key:"_getVersionId",value:function(e){var o=void 0;return(e.versionId||e.version_id)&&(o=e.versionId||e.version_id,e.versionId?delete e.versionId:e.version_id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o,f.default.VERSION,f.default.VERSION_ID),o}},{key:"_getFile",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.file?(r||(0,_.default)(e.file,o),n||(0,b.default)(e.file,this.FLATTENED_VALUES),e.body=(0,y.default)(e.file,this.ALL_VALUES,n),delete e.file):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r="/files/"+o;return e.method=f.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getDownloadUrl",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.params=e.params||{},e.fields||e.params.fields?(e.params.fields=e.params.fields?e.params.fields:e.fields,e.params.fields=e.params.fields.concat(",download_url")):e.params={fields:"download_url"};var r="/files/"+o;return e.method=f.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"chunkedUpload",value:function(e){if(e=e||{},!e.file)throw new Error("Must make this call with an HTML5 File object.");if(e.file&&e.file.size<5e7)throw new Error("File size less than minimum allowed for this API: 50000000");return e.name=e.name||e.file.name,new c.default(this,e.name,e.file,e.parentFolder,e.listeners).startSession()}},{key:"chunkedUploadNewFileVersion",value:function(e){if(e=e||{},!e.id)throw new Error("chunkedUploadNewVersion requires an existing file ID");if(!e.file)throw new Error("Must make this call with an HTML5 File object.");if(e.file&&e.file.size<5e7)throw new Error("File size less than minimum allowed for this API: 50000000");return e.name=e.name||e.file.name,new c.default(this,e.name,e.file,e.parentFolder,e.listeners,e.id).startSession()}},{key:"upload",value:function(e){return e=e||{},e.url=e.url||I+"/files/content",e.method=f.default.HTTP_VERBS.POST,e.upload=!0,this.client.makeRequest(null,e)}},{key:"uploadNewFileVersion",value:function(e){if(!(0,S.default)())throw new Error("Form Data not supported. The uploadNewFileVersion requires Form Data in the browser.");e=e||{};var t=e.body.get("id")||e.body.get("fileId")||e.body.get("file_id");return e.url=e.url||I+"/files/"+t+"/content",e.method=f.default.HTTP_VERBS.POST,e.upload=!0,this.client.makeRequest(null,e)}},{key:"uploadWithPreflightAndMd5",value:function(e){var t=this;e=e||{};var o=e.file,r=e.body,n={name:e.name,parent:e.parent,size:e.file.size},i=JSON.parse(JSON.stringify(e));return this.preflightCheck(n).then(function(e){e.upload_url&&(i.url=e.upload_url)}).then(function(){if(void 0===o)throw new Error("Couldn't access file...");return(0,T.default)(o)}).then(function(e){return i.headers=i.headers||{},i.body=r,delete i.file,i.headers["Content-MD5"]=e,t.upload(i)})}},{key:"uploadNewFileVersionWithPreflightAndMd5",value:function(e){var t=this;if(!(0,S.default)())throw new Error("Form Data not supported. The uploadNewFileVersion requires Form Data in the browser.");e=e||{};var o=e.file,r=e.body,n=JSON.parse(JSON.stringify(e));return e.fileId=e.body.get("id")||e.body.get("fileId")||e.body.get("file_id"),this.preflightCheckNewFileVersion(e).then(function(e){e.upload_url&&(n.url=e.upload_url)}).then(function(){if(void 0===o)throw new Error("Couldn't access file...");return(0,T.default)(o)}).then(function(e){return n.headers=n.headers||{},n.body=r,delete n.file,n.headers["Content-MD5"]=e,t.uploadNewFileVersion(n)})}},{key:"preflightCheck",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[j.SIZE,j.NAME],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFile(e,o,r,n)}return e.method=f.default.HTTP_VERBS.OPTIONS,this.client.makeRequest("/files/content",e)}},{key:"preflightCheckNewFileVersion",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!this.client._simpleMode){var r=[j.SIZE,j.NAME],n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFile(e,r,n,i)}var s="/files/"+o+"/content";return e.method=f.default.HTTP_VERBS.OPTIONS,this.client.makeRequest(s,e)}},{key:"update",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.url=e.url||I+"/"+o+"/content",this.upload(e)}},{key:"getComments",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r="/files/"+o+"/comments";return e.method=f.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTasks",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r="/files/"+o+"/tasks";return e.method=f.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getEmbedLink",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.params=e.params||{},e.fields||e.params.fields?(e.fields&&(e.params.fields=e.fields,delete e.fields),e.params.fields=e.params.fields.concat(",expiring_embed_link")):e.params.fields="expiring_embed_link";var r="/files/"+o;return e.method=f.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getVersions",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r="/files/"+o+"/versions";return e.method=f.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getThumbnail",value:function(e){e=e||{},e.extension=e.extension||".png",e.params=e.params||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);Object.keys(e).map(function(t){-1!==A.indexOf(t)&&(e.params[t]=e[t],delete e[t])});var r="/files/"+o+"/thumbnail"+e.extension;return delete e.extension,e.method=f.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTrashedFile",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r="/files/"+o+"/trash";return e.method=f.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getCollaborations",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r="/files/"+o+"/collaborations";return e.method=f.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"createSharedLink",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_createSharedLink",this).call(this,e,o,"/files",this.FLATTENED_VALUES)}},{key:"promoteVersion",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!e.body.id){var r=this._getVersionId(e);e.body.id=r}e.body.type="file_version";var n="/files/"+o+"/versions/current";return e.method=f.default.HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"copy",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!e.body.parent&&!e.body.parent.id)if(e.body.parent={},e.id)e.body.parent.id=e.id,delete e.id;else{if(!e.parentId)throw new Error("A parentId or id is required for this API call.");e.body.parent.id=e.parentId,delete e.parentId}e.name?(e.body.name=e.name,delete e.name):e.newName&&(e.body.name=e.newName,delete e.newName);var r="/files/"+o+"/copy";return e.method=f.default.HTTP_VERBS.POST,this.client.makeRequest(r,e)}},{key:"updateInfo",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFile(e,[],r,n)}var i="/files/"+o;return e.method=f.default.HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"lock",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e[w]?(e.body[w]=e[w],e.body[w].type=w,delete e[w]):e.body.lock={type:w};var r="/files/"+o;return e.method=f.default.HTTP_VERBS.PUT,this.client.makeRequest(r,e)}},{key:"unlock",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e[w]&&delete e[w],e.body[w]=null;var r="/files/"+o;return e.method=f.default.HTTP_VERBS.PUT,this.client.makeRequest(r,e)}},{key:"restore",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.parent&&(e.body=e.body||{},e.body.parent=e.parent,delete e.parent),e.name&&(e.body=e.body||{},e.body.name=e.name,delete e.name);var r="/files/"+o;return e.method=f.default.HTTP_VERBS.POST,this.client.makeRequest(r,e)}},{key:"delete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r="/files/"+o;return e.method=f.default.HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}},{key:"deleteVersion",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=this._getVersionId(e),n="/files/"+o+"/versions/"+r;return e.method=f.default.HTTP_VERBS.DELETE,this.client.makeRequest(n,e)}},{key:"permanentlyDelete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r="/files/"+o+"/trash";return e.method=f.default.HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}},{key:"createSHA1Hash",value:function(e){return(0,k.default)(e)}}]),t}(v.default);t.default=C,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),s=o(0),a=r(s),l=o(9),u=r(l),c=o(5),p=r(c),f="boxChunkedUploadStartCancelling",d="boxChunkedUploadAbortUpload",_=function(){function e(t,o,r,i,s,l){n(this,e),this.rusha=new p.default,this.hash=p.default.createHash(),this.filesManager=t,this.client=t.client,this.file=r,this.fileName=o,this.newVersionFileId=l||"",this.parts=[],this.tasks=[],this.partRequestCancellations=[],this.parentFolder=i,this.session={id:"",endpoints:{listParts:"",commit:"",uploadPart:"",status:"",abort:""},expiresAt:"",partSize:0,totalParts:0,fileDigest:{}},this.getFailureNotification=s.getFailureNotification||null,this.getSuccessNotification=s.getSuccessNotification||null,this.getStartNotification=s.getStartNotification||null,this.getFileCommitNotification=s.getFileCommitNotification||null,this.getFileCommitRetryNotification=s.getFileCommitRetryNotification||null,this.getCompletedNotification=s.getCompletedNotification||null,this.getIsCancellingNotification=s.getIsCancellingNotification||null,this.getIsCancelledNotification=s.getIsCancelledNotification||null,this.handleProgressUpdates=s.handleProgressUpdates||null,this.progress={isCancelled:!1,isComplete:!1,didStart:!1,didFail:!1,didSucceed:!1,didFileCommit:!1,didSessionStart:!1,percentageProcessed:0,percentageUploaded:0,fileCommitRetryTime:0,session:{}},this.retry=0,this.uploadCount=0,this.processedCount=0,this.isCancelled=!1,this.finishedCancelling=!1,this.finishedUploading=!1,this.retryCommitTimer=null,this.retryPromises=[];var u=this;this.abortUpload=function(e){if(u.retryCommitTimer&&clearTimeout(u.retryCommitTimer),u.partRequestCancellations.forEach(function(e){e.abort&&e.abort()}),u.isCancelled=!0,null!==u.getIsCancellingNotification&&(u.progress.didFileCommit=!1,u.progress.didSucceed=!1,u.progress.didFail=!1,u.fireEvent(u.progress,f)),u.session&&u.session.endpoints&&u.session.endpoints.abort){var t={};return t.method=a.default.HTTP_VERBS.DELETE,t.url=u.session.endpoints.abort,u.client.makeRequest(null,t).then(function(e){null!==u.getIsCancelledNotification&&u.fireEndCancellingEvent(),u.endSession(),u.finishedCancelling=!0}).catch(function(e){null!==u.getIsCancelledNotification&&u.fireEndCancellingEvent(),u.endSession(),u.finishedCancelling=!0})}null!==u.getIsCancelledNotification&&u.fireEndCancellingEvent(),u.finishedCancelling=!0,u.endSession()},addEventListener(d,this.abortUpload)}return i(e,[{key:"fireEndCancellingEvent",value:function(){var e=this;e.progress.didFileCommit=!1,e.progress.didSucceed=!1,e.progress.didFail=!1,e.progress.isComplete=!0,e.progress.isCancelled=!0,e.fireEvent(e.progress,"boxChunkedUploadEndCancelling")}},{key:"endSession",value:function(){this.removeListeners(),this.session=null,this.filesManager=null,this.client=null,this.file=null,this.fileName=null,this.parts=null,this.tasks=null,this.partRequestCancellations=null,this.parentFolder=null,this.retry=null,this.uploadCount=null,this.processedCount=null,this.isCancelled=null,this.finishedCancelling=null,this.finishedUploading=null,this.abortUpload=null}},{key:"addListeners",value:function(){null!==this.getFailureNotification&&addEventListener("boxChunkedUploadFailure",this.getFailureNotification),null!==this.getSuccessNotification&&addEventListener("boxChunkedUploadSuccess",this.getSuccessNotification),null!==this.getStartNotification&&addEventListener("boxChunkedUploadStart",this.getStartNotification),null!==this.getFileCommitNotification&&addEventListener("boxChunkedUploadFileCommitted",this.getFileCommitNotification),null!==this.getFileCommitRetryNotification&&addEventListener("boxChunkedUploadFileCommitRetry",this.getFileCommitRetryNotification),null!==this.getCompletedNotification&&addEventListener("boxChunkedUploadCompleted",this.getCompletedNotification),null!==this.getIsCancellingNotification&&addEventListener(f,this.getIsCancellingNotification),null!==this.getIsCancelledNotification&&addEventListener("boxChunkedUploadEndCancelling",this.getIsCancelledNotification),null!==this.handleProgressUpdates&&addEventListener("boxChunkedUploadProgress",this.handleProgressUpdates)}},{key:"removeListeners",value:function(){null!==this.getFailureNotification&&removeEventListener("boxChunkedUploadFailure",this.getFailureNotification),null!==this.getSuccessNotification&&removeEventListener("boxChunkedUploadSuccess",this.getSuccessNotification),null!==this.getStartNotification&&removeEventListener("boxChunkedUploadStart",this.getStartNotification),null!==this.getFileCommitNotification&&removeEventListener("boxChunkedUploadFileCommitted",this.getFileCommitNotification),null!==this.getFileCommitRetryNotification&&removeEventListener("boxChunkedUploadFileCommitRetry",this.getFileCommitRetryNotification),null!==this.getCompletedNotification&&removeEventListener("boxChunkedUploadCompleted",this.getCompletedNotification),null!==this.handleProgressUpdates&&removeEventListener("boxChunkedUploadProgress",this.handleProgressUpdates),null!==this.getIsCancellingNotification&&removeEventListener(f,this.getCompletedNotification),null!==this.getIsCancelledNotification&&removeEventListener("boxChunkedUploadEndCancelling",this.getCompletedNotification),removeEventListener(d,this.abortUpload)}},{key:"fireEvent",value:function(e,t){var o=new CustomEvent(t,{detail:{progress:e},bubbles:!0,cancelable:!0});dispatchEvent(o)}},{key:"startSession",value:function(){this.addListeners(),this.progress.didStart=!0,null!==this.getStartNotification&&this.fireEvent(this.progress,"boxChunkedUploadStart");var e={},t=this;return e.method=a.default.HTTP_VERBS.POST,t.newVersionFileId?(e.url=this.filesManager.UPLOAD_PATH+"/files/"+t.newVersionFileId+"/upload_sessions",e.body={file_size:this.file.size,file_name:this.fileName}):(e.url=this.filesManager.UPLOAD_PATH+"/files/upload_sessions",e.body={folder_id:this.parentFolder.id,file_size:this.file.size,file_name:this.fileName}),this.client.httpService.defaults||(e.useXHR=!0),this.client.makeRequest(null,e).then(function(e){if(t.isCancelled)throw new Error("Upload cancelled");return e.data&&(e=e.data),t.session.id=e.id,t.session.expiresAt=e.session_expires_at,t.session.partSize=e.part_size,t.session.totalParts=e.total_parts,t.session.endpoints.listParts=e.session_endpoints.list_parts,t.session.endpoints.commit=e.session_endpoints.commit,t.session.endpoints.uploadPart=e.session_endpoints.upload_part,t.session.endpoints.status=e.session_endpoints.status,t.session.endpoints.abort=e.session_endpoints.abort,t.progress.session=t.session,t.makeChunks(),t.processChunks()}).then(function(e){if(!t.isCancelled)return t.commitUpload()}).then(function(e){if(!t.isCancelled)return null!==t.getFileCommitNotification&&(t.progress.didFileCommit=!0,t.fireEvent(t.progress,"boxChunkedUploadFileCommitted")),null!==t.getCompletedNotification&&(t.progress.didSucceed=!0,t.progress.isComplete=!0,t.fireEvent(t.progress,"boxChunkedUploadCompleted")),null!==t.getSuccessNotification&&(t.progress.didSucceed=!0,t.progress.isComplete=!0,t.fireEvent(t.progress,"boxChunkedUploadSuccess")),t.removeListeners(),t.session={},e}).catch(function(e){if(null!==t.getCompletedNotification&&("Upload cancelled"!==e.message&&(t.progress.didFail=!0,t.progress.isCancelled=!0),t.progress.isComplete=!0,t.fireEvent(t.progress,"boxChunkedUploadCompleted")),null!==t.getFailureNotification&&t.fireEvent(t.progress,"boxChunkedUploadFailure"),!t.isCancelled){if("function"!=typeof t.abortUpload)throw e;t.abortUpload()}throw e})}},{key:"makeChunks",value:function(){var e=this;if(e.isCancelled)throw new Error("Upload cancelled");for(var t=this.file.size,o=0,r=void 0;o<t;){if(e.isCancelled)throw new Error("Upload cancelled");var n=o+e.session.partSize-1;n>t-1&&(n=t-1),r=e.file.slice(o,o+e.session.partSize),e.parts.push({part:r,contentRange:"bytes "+o+"-"+n+"/"+e.file.size,digest:"",uploaded:!1,retry:0}),o+=e.session.partSize}}},{key:"processChunk",value:function(e){var t=this;if(t.isCancelled)throw new Error("Upload cancelled");if(e.uploaded)return new Promise.resolve;e.retry++;var o=e.part;return t.filesManager.createSHA1Hash(o).then(function(o){if(t.isCancelled)throw new Error("Upload cancelled");t.processedCount++,null!==t.handleProgressUpdates&&(t.progress.percentageProcessed=(t.processedCount/t.session.totalParts).toFixed(2),t.fireEvent(t.progress,"boxChunkedUploadProgress")),e.digest=o.hash,t.hash.update(o.arrayBuffer);var r={};return r.method=a.default.HTTP_VERBS.PUT,r.url=t.session.endpoints.uploadPart,r.headers={Digest:"sha="+o.hash,"Content-Range":e.contentRange,"Content-Type":"application/octet-stream"},r.body=e.part,r.chunkedUpload=!0,r.returnsOnlyOptions=!0,t.client.makeRequest(null,r).then?t.client.makeRequest(null,r):new Promise(function(e,o){try{e(t.client.makeRequest(null,r))}catch(e){o(e)}})}).then(function(e){if(e.includeFullResponse=!0,t.isCancelled)throw new Error("Upload cancelled");if(t.filesManager.client.httpService.defaults&&t.filesManager.client.Promise.defer){var o=t.filesManager.client.Promise.defer(),r=function(e){o.resolve(e)};return t.partRequestCancellations.push({abort:r}),t.filesManager.client.httpService.put(e.url,e.body,{headers:e.headers,timeout:o.promise})}e.useXHR=!0,e.returnCancelToken=!0;var n=t.filesManager.client.httpService(e);return t.partRequestCancellations.push({abort:n.abort}),n.promise}).catch(function(o){if(!o||!o.status||416===o.status||t.isCancelled)throw o;if(e.retry<2)return t.processChunk(e)}).then(function(o){if(t.isCancelled)throw new Error("Upload cancelled");t.uploadCount++,null!==t.handleProgressUpdates&&(t.progress.percentageUploaded=(t.uploadCount/t.session.totalParts).toFixed(2),t.fireEvent(t.progress,"boxChunkedUploadProgress")),o.data&&(o=o.data),e.response=o,e.uploaded=!0})}},{key:"processChunks",value:function(){var e=this;if(e.isCancelled)throw new Error("Upload cancelled");return this.parts.forEach(function(t){if(e.isCancelled)throw new Error("Upload cancelled");e.tasks.push(e.processChunk(t))}),Promise.all(e.tasks)}},{key:"commitUpload",value:function(e,t){var o=this;return new Promise(function(r,n){var i=o;if(i.isCancelled)throw new Error("Upload cancelled");var s=[],l="";if(e)l=e;else{var c=i.hash.digest();l=(0,u.default)(c)}t?s=t:(i.finishedUploading=!0,o.parts.forEach(function(e){if(i.isCancelled)throw new Error("Upload cancelled");!1===e.uploaded&&(i.finishedUploading=!1,i.abortUpload())}),i.parts.forEach(function(e){e&&e.response&&e.response.part||i.abortUpload(),s.push(e.response.part)}));var p={};return p.chunkedUpload=!0,p.method=a.default.HTTP_VERBS.POST,p.url=i.session.endpoints.commit,p.headers={Digest:"sha="+l},p.body=JSON.stringify({parts:s}),p.includeFullResponse=!0,p.useXHR=!0,i.client.makeRequest(null,p).then(function(e){if(e.status&&202==e.status){if(i.isCancelled)throw new Error("Upload cancelled");var t=void 0;return t=e&&e.headers&&"function"==typeof e.headers?e.headers()["retry-after"]:e&&e.headers&&e.headers["retry-after"]?e.headers["retry-after"]:30,t*=1e3,new Promise(function(e,o){i.delay(t).then(function(){return e(i.commitUpload(l,s))})})}return Promise.resolve(e)}).then(function(e){return r(e)})})}},{key:"delay",value:function(e){var t=this;return null!==t.getFileCommitRetryNotification&&(t.progress.fileCommitRetryTime=e/1e3,t.fireEvent(t.progress,"boxChunkedUploadFileCommitRetry")),new Promise(function(o){t.retryCommitTimer=setTimeout(o,e)})}}]),e}();t.default=_,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(5),i=r(n),s=o(9),a=r(s),l=o(10),u=r(l);t.default=function(e){return new Promise(function(t,o){(0,u.default)()||o(new Error("FileReader isn't usable in this browser."));try{var r=new FileReader;r.onload=function(e){if(!e||!e.target||!e.target.result)return void o();var r=new i.default;t({hash:(0,a.default)(r.rawDigest(e.target.result).buffer),arrayBuffer:e.target.result})},r.readAsArrayBuffer(e)}catch(e){o(e)}})},e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(5),i=r(n),s=o(10),a=r(s);t.default=function(e){return new Promise(function(t,o){(0,a.default)()||o(new Error("FileReader isn't usable in this browser."));try{var r=new FileReader;r.onload=function(e){if(!e||!e.target||!e.target.result)return void o();var r=new i.default;t(r.digestFromBuffer(e.target.result))},r.readAsArrayBuffer(e)}catch(e){o(e)}})},e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!!(window&&window.FormData||FormData)},e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=o(0),c=r(u),p=o(2),f=r(p),d=o(4),_=r(d),h=o(3),y=r(h),g=o(1),b=r(g),m={URL:"url",PARENT:"parent",ID:"parent.id",NAME:"name",DESCRIPTION:"description"},v=function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,m));return o.client=e,o}return s(t,e),a(t,[{key:"_getWebLinkId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.webLink&&(e.web_link=e.webLink,delete e.webLink),e.web_link&&e.web_link.id?o=e.web_link.id:(e.webLinkId||e.web_link_id)&&(o=e.webLinkId||e.web_link_id,e.webLinkId?delete e.webLinkId:delete e.web_link_id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getWebLink",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.webLink&&(e.web_link=e.webLink,delete e.webLink),e.web_link?(r||(0,f.default)(e.webLink,o),n||(0,y.default)(e.webLink,this.FLATTENED_VALUES),e.body=(0,_.default)(e.webLink,this.ALL_VALUES),delete e.web_link):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getWebLinkId(e),r="/web_links/"+o;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var t=[ALL_VALUES.URL,ALL_VALUES.PARENT,ALL_VALUES.ID],o=InvestigateModes(e,c.default.MODES.SKIP_VALIDATION)||!1,r=InvestigateModes(e,c.default.MODES.IGNORE_MODEL_VALUES)||!1;this.client._returnsOnlyOptions||this._getWebLink(e,t,o,r)}return e.method=c.default.HTTP_VERBS.POST,this.client.makeRequest("/web_links",e)}},{key:"update",value:function(e){e=e||{};var t=this._getWebLinkId(e);if(!this.client._simpleMode){var o=InvestigateModes(e,c.default.MODES.SKIP_VALIDATION)||!1,r=InvestigateModes(e,c.default.MODES.IGNORE_MODEL_VALUES)||!1;this._getWebLink(e,[],o,r)}var n="/web_links/"+t;return e.method=c.default.HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"delete",value:function(e){e=e||{};var t=this._getWebLinkId(e),o="/web_links/"+t;return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}}]),t}(b.default);t.default=v,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=o(0),c=r(u),p=o(1),f=r(p),d="/collaborations",_={NOTIFY:"notify",ITEM:"item",ITEM_TYPE:"item.type",ITEM_ID:"item.id",ACCESSIBLE_BY:"accessible_by",ACCESSIBLE_BY_ID:"accessible_by.id",ACCESSIBLE_BY_TYPE:"accessible_by.type",ACCESSIBLE_BY_LOGIN:"accessible_by.login",ROLE:"role"},h=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_))}return s(t,e),a(t,[{key:"_getCollaborationId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.collaborationId||e.collaboration_id?(o=e.collaborationId||e.collaboration_id,e.collaborationId?delete e.collaborationId:delete e.collaboration_id):e.collaboration&&e.collaboration.id&&(o=e.collaboration.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getCollaboration",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.collaboration?(r||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"VerifyRequiredValues",this).call(this,e.collaboration,o),n||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"NormalizeObjectKeys",this).call(this,e.collaboration,this.FLATTENED_VALUES),e.body=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"CreateRequestBody",this).call(this,e.comment,this.ALL_VALUES,n),delete e.collaboration):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCollaborationId(e),r=d+"/"+o;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[_.ITEM,_.ITEM_ID,_.ITEM_TYPE,_.ACCESSIBLE_BY,_.ROLE],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getCollaboration(e,o,r,n)}return e.method=c.default.HTTP_VERBS.POST,this.client.makeRequest("/collaborations",e)}},{key:"update",value:function(e){e=e||{};var o=this._getCollaborationId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getCollaboration(e,[],r,n)}var i=d+"/"+o;return e.method=c.default.HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"delete",value:function(e){e=e||{};var t=this._getCollaborationId(e),o=d+"/"+t;return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}}]),t}(f.default);t.default=h,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=o(0),c=r(u),p=o(1),f=r(p),d={},_=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d))}return s(t,e),a(t,[{key:"_getCollectionId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.collectionId||e.collection_id?(o=e.collectionId||e.collection_id,e.collectionId?delete e.collectionId:delete e.collection_id):e.collection&&e.collection.id&&(o=e.collection.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCollectionId(e),r="/collections/"+o+"/items";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getAll",value:function(e){e=e||{};return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest("/collections",e)}}]),t}(f.default);t.default=_,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=o(0),c=r(u),p=o(1),f=r(p),d={ITEM:"item",ITEM_TYPE:"item.type",ITEM_ID:"item.id",TAGGED_MESSAGE:"tagged_message",MESSAGE:"message"},_=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d))}return s(t,e),a(t,[{key:"_getCommentId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.commentId||e.comment_id?(o=e.commentId||e.comment_id,e.commentId?delete e.commentId:delete e.comment_id):e.comment&&e.comment.id&&(o=e.comment.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o,c.default.COMMENT,c.default.COMMENT_ID),o}},{key:"_getComment",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.comment?(r||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"VerifyRequiredValues",this).call(this,e.comment,o),n||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"NormalizeObjectKeys",this).call(this,e.comment,this.FLATTENED_VALUES),e.body=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"CreateRequestBody",this).call(this,e.comment,this.ALL_VALUES,n),delete e.comment):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCommentId(e),r="/comments/"+o;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[d.ITEM,d.ITEM_ID,d.ITEM_TYPE,d.MESSAGE],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getComment(e,o,r,n)}return e.method=c.default.HTTP_VERBS.POST,this.client.makeRequest("/comments",e)}},{key:"update",value:function(e){e=e||{};var o=this._getCommentId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getComment(e,[d.MESSAGE],r,n)}var i="/comments/"+o;return e.method=c.default.HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"delete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCommentId(e),r="/comments/"+o;return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}}]),t}(f.default);t.default=_,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=o(0),c=r(u),p=o(2),f=r(p),d=o(3),_=r(d),h=o(1),y=r(h),g={NAME:"name",PROVENANCE:"provenance",EXTERNAL_SYNC_IDENTIFIER:"external_sync_identifier",DESCRIPTION:"description",INVITABILITY_LEVEL:"invitability_level",MEMBER_VIEWABILITY_LEVEL:"member_viewability_level",USER:"user",USER_ID:"user.id",GROUP:"group",GROUP_ID:"group.id",ROLE:"role"},b=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g))}return s(t,e),a(t,[{key:"_getGroupId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.groupId||e.group_id?(o=e.groupId||e.group_id,e.groupId?delete e.groupId:delete e.group_id):e.group&&e.group.id&&(o=e.group.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getGroupMembershipId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.groupMembershipId||e.group_membership_id?(o=e.groupMembershipId||e.group_membership_id,e.groupMembershipId?delete e.groupMembershipId:delete e.group_membership_id):(e.groupMembership&&e.groupMembership.id||e.group_membership&&e.group_membership.id)&&(o=e.groupMembership.id||e.group_membership.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getGroup",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.group?(r||(0,f.default)(e.group,o),n||(0,_.default)(e.group,this.FLATTENED_VALUES),e.body=CreateRequestBody(e.group,this.ALL_VALUES,n),delete e.group):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"_getGroupMembership",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.groupMembership&&(e.group_membership=e.groupMembership,delete e.groupMembership),e.group_membership?(r||(0,f.default)(e.group_membership,o),n||(0,_.default)(e.group_membership,this.FLATTENED_VALUES),e.body=CreateRequestBody(e.group_membership,this.ALL_VALUES,n),delete e.group_membership):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getGroupId(e),r="/groups/"+o;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getAll",value:function(e){e=e||{};return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest("/groups",e)}},{key:"update",value:function(e){e=e||{};var o=this._getGroupId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getGroup(e,[],r,n)}var i="/groups/"+o;return e.method=c.default.HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"getMembership",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getGroupMembershipId(e),r="/group_memberships/"+o;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"updateMembership",value:function(e){e=e||{};var o=this._getGroupMembershipId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getGroupMembership(e,[],r,n)}var i="/group_memberships/"+o;return e.method=c.default.HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"deleteMembership",value:function(e){e=e||{};var t=this._getGroupMembershipId(e),o="/group_memberships/"+t;return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}},{key:"getMembershipsForGroup",value:function(e){e=e||{};var t=this._getGroupId(e),o="/groups/"+t+"/memberships";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(o,e)}},{key:"getCollaborationsForGroup",value:function(e){e=e||{};var t=this._getGroupId(e),o="/groups/"+t+"/collaborations";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(o,e)}}]),t}(y.default);t.default=b,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=o(0),c=r(u),p=o(2),f=(r(p),o(4)),d=(r(f),o(3)),_=(r(d),o(1)),h=r(_),y={},g=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,y))}return s(t,e),a(t,[{key:"get",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n="/metadata_templates/"+o+"/"+r+"/schema";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(n,e)}},{key:"getTemplates",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),r="/metadata_templates/"+o;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i="/folders/"+o+"/metadata/"+r+"/"+n;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(i,e)}},{key:"getAllFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r="/folders/"+o+"/metadata";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i="/files/"+o+"/metadata/"+r+"/"+n;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(i,e)}},{key:"getAllFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r="/files/"+o+"/metadata";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"createFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i="/folders/"+o+"/metadata/"+r+"/"+n;return e.method=c.default.HTTP_VERBS.POST,e.headers=e.headers||{},e.headers["Content-Type"]="application/json",this.client.makeRequest(i,e)}},{key:"createFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i="/files/"+o+"/metadata/"+r+"/"+n;return e.method=c.default.HTTP_VERBS.POST,e.headers=e.headers||{},e.headers["Content-Type"]="application/json",this.client.makeRequest(i,e)}},{key:"updateFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i="/files/"+o+"/metadata/"+r+"/"+n;return e.method=c.default.HTTP_VERBS.PUT,e.headers=e.headers||{},e.headers["Content-Type"]="application/json-patch+json",this.client.makeRequest(i,e)}},{key:"updateFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i="/folders/"+o+"/metadata/"+r+"/"+n;return e.method=c.default.HTTP_VERBS.PUT,e.headers=e.headers||{},e.headers["Content-Type"]="application/json-patch+json",this.client.makeRequest(i,e)}},{key:"deleteFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i="/folders/"+o+"/metadata/"+r+"/"+n;return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(i,e)}},{key:"deleteFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i="/files/"+o+"/metadata/"+r+"/"+n;return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(i,e)}}]),t}(h.default);t.default=g,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=o(1),u=r(l),c=o(0),p=r(c),f={},d=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f))}return s(t,e),a(t,[{key:"_objectifyStringWithQuery",value:function(e){if("string"==typeof e){e={query:e}}return e}},{key:"_getQuery",value:function(e){var t="";if(!e.query&&!e.params.query)throw new Error("An query field is required for this API call. Please provide an object with a key formatted in this style: query");return e.params=e.params||{},t=e.query||e.params.query,e.query&&delete e.query,e.params.query=t,e}},{key:"search",value:function(e){e=this._objectifyStringWithQuery(e)||{},e=this._getQuery(e);return e.method=p.default.HTTP_VERBS.GET,this.client.makeRequest("/search",e)}}]),t}(u.default);t.default=d,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=o(0),c=r(u),p=o(2),f=r(p),d=o(4),_=r(d),h=o(3),y=r(h),g=o(1),b=r(g),m={TASK:"task",TASK_TYPE:"task.type",TASK_ID:"task.id",ASSIGN_TO:"assign_to",ASSIGN_TO_ID:"assign_to.id",ASSIGN_TO_LOGIN:"assign_to.login",RESOLUTION_STATE:"resolution_state",ITEM:"item",ITEM_TYPE:"item.type",ITEM_ID:"item.id",ACTION:"action",MESSAGE:"message",DUE_AT:"due_at"},v=function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,m));return o.client=e,o}return s(t,e),a(t,[{key:"_getTaskId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.taskId||e.task_id?(o=e.taskId||e.task_id,e.taskId?delete e.taskId:delete e.task_id):e.task&&e.task.id&&(o=e.task.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getTaskAssignmentId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.taskAssignment&&(e.task_assignment=e.taskAssignment,delete e.taskAssignment),e.taskAssignmentId||e.task_assignment_id?(o=e.taskId||e.task_id,e.taskId?delete e.taskId:delete e.task_id):e.task_assignment&&e.task_assignment.id&&(o=e.task_assignment.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getTask",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.task?(r||(0,f.default)(e.task,o),n||(0,y.default)(e.task,this.FLATTENED_VALUES),e.body=(0,_.default)(e.task,this.ALL_VALUES,n),delete e.task):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"_getTaskAssignment",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.taskAssignment&&(e.task_assignment=e.taskAssignment,delete e.taskAssignment),e.task_assignment?(r||(0,f.default)(e.task_assignment,o),n||(0,y.default)(e.task_assignment,this.FLATTENED_VALUES),e.body=(0,_.default)(e.task_assignment,this.ALL_VALUES,n),delete e.task_assignment):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getTaskId(e),r="/tasks/"+o;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[m.ITEM,m.ITEM_ID,m.ITEM_TYPE],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTask(e,o,r,n)}return e.method=c.default.HTTP_VERBS.POST,this.client.makeRequest("/tasks",e)}},{key:"update",value:function(e){e=e||{};var o=this._getTaskId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTask(e,[],r,n)}var i="/tasks/"+o;return e.method=c.default.HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"delete",value:function(e){e=e||{};var t=this._getTaskId(e),o="/tasks/"+t;return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}},{key:"getTaskAssignment",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getTaskAssignmentId(e),r="/task_assignments/"+o;return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTaskAssignments",value:function(e){e=e||{};var t=this._getTaskId(e),o="/tasks/"+t+"/assignments";return e.method=c.default.HTTP_VERBS.GET,this.client.makeRequest(o,e)}},{key:"createTaskAssignment",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[m.TASK,m.TASK_TYPE,m.TASK_ID,m.ASSIGN_TO],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTaskAssignment(e,o,r,n)}return e.method=c.default.HTTP_VERBS.POST,this.client.makeRequest("/task_assignments",e)}},{key:"updateTaskAssignment",value:function(e){e=e||{};var o=this._getTaskAssignmentId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTaskAssignment(e,[],r,n)}var i="/task_assignments/"+o;return e.method=c.default.HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"deleteTaskAssignment",value:function(e){e=e||{};var t=this._getTaskAssignmentId(e),o="/task_assignments/"+t;return e.method=c.default.HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}}]),t}(b.default);t.default=v,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=o(0),u=r(l),c=o(2),p=(r(c),o(3)),f=(r(p),o(1)),d=r(f),_={},h=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_))}return s(t,e),a(t,[{key:"getCurrentUser",value:function(e){e=e||{};return e.method=u.default.HTTP_VERBS.GET,this.client.makeRequest("/users/me",e)}},{key:"getGroupMemberships",value:function(e){e=e||{};var t="/users/"+userId+"/memberships";return e.method=u.default.HTTP_VERBS.GET,this.client.makeRequest(t,e)}}]),t}(d.default);t.default=h,e.exports=t.default},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),u=o(7),c=r(u),p=o(0),f=r(p),d=function(e){function t(e){n(this,t),e=e||{};var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._tokenExpirationTime=e.tokenExpirationTime||27e5,o.accessTokenHandler=o._checkConfigForAccessTokenHandler(e),o.accessTokenStore=o._defaultAccessTokenStore(),o.storage=e.storage||"localStorage",o.disableStorage=e.disableStorage||!1,o.isCallback=e.isCallback||!1,o.isPromise=e.isPromise||!0,o.requestRetryTimes=e.retryTimes||3,o.supportsStorage=o._storageAvailable(o.storage),o.suppressExpiration=e.suppressExpiration||!1,o}return s(t,e),l(t,[{key:"_checkConfigForAccessTokenHandler",value:function(e){if("object"===(void 0===e?"undefined":a(e))&&(e.accessTokenHandler||e.access_token_handler))return e.accessTokenObject=e.accessTokenHandler||e.access_token_handler,e.accessTokenObject;throw new Error("An accessTokenHandler is required to create a PersisentBoxClient. Please provide a callback function or promise that resolves to an access token")}},{key:"_storageAvailable",value:function(e){try{var t=window[e],o="__storage_test__";return t.setItem(o,o),t.removeItem(o),!0}catch(e){return!1}}},{key:"_verifyAccessTokenObject",value:function(e){var t={};return"string"==typeof e?(t.accessToken=e,this.suppressExpiration||(t.expiresAt=this._calculateTokenExpiration()),t):("object"===(void 0===e?"undefined":a(e))&&(e.accessToken||e.access_token)&&(t.accessToken=e.accessToken||e.access_token),"object"!==(void 0===e?"undefined":a(e))||this.suppressExpiration||!e.expiresAt&&!e.expires_at||(t.expiresAt=e.expiresAt||e.expires_at),this.suppressExpiration||t.expiresAt||(t.expiresAt=this._calculateTokenExpiration()),t)}},{key:"_calculateTokenExpiration",value:function(){return Date.now()+this._tokenExpirationTime}},{key:"_promisifyAccessTokenHandler",value:function(e){if("function"==typeof e&&this.isCallback)return new this.Promise(function(t,o){e(function(e,r){e&&o(e),r?t(r):o("Couldn't retrieve a new token.")})});if("function"==typeof e&&this.isPromise){var t=e();if("object"===(void 0===t?"undefined":a(t))&&"then"in t)return t;throw new Error("accessTokenHandler must resolve to a function or promise")}throw new Error("accessTokenHandler must resolve to a function or promise")}},{key:"_defaultAccessTokenStore",value:function(){var e=this;return this._accessToken=function(){return e.supportsStorage&&!e.disableStorage?new e.Promise(function(t,o){return e._promisifyAccessTokenHandler(e.accessTokenHandler).then(function(o){o=e._verifyAccessTokenObject(o),window[e.storage].setItem(f.default.BOX_TOKEN_STORAGE_KEY,JSON.stringify(o)),t(o)})}):new e.Promise(function(t,o){return e._promisifyAccessTokenHandler(e.accessTokenHandler).then(function(o){o=e._verifyAccessTokenObject(o),t(o)})})},{accessToken:this._accessToken}}},{key:"_isExpired",value:function(e){return(e.expires_at||e.expiresAt)<Date.now()}},{key:"retrieveToken",value:function(e){if(this.supportsStorage&&!this.disableStorage){var t=window[this.storage].getItem(f.default.BOX_TOKEN_STORAGE_KEY);return t=t?JSON.parse(t):null,t&&!this._isExpired(t)&&0===e?new this.Promise(function(e,o){e(t)}):(window[this.storage].removeItem(f.default.BOX_TOKEN_STORAGE_KEY),this.accessTokenStore.accessToken())}return this.accessTokenStore.accessToken()}},{key:"reauth",value:function(e,t,o){var r=this;return this.retrieveToken(o).then(function(o){var n=t.headers||{};n[f.default.HEADER_AUTHORIZATION]="Bearer "+o.accessToken,t=t||{};var i=Object.assign({},t);return i.url=t.url||""+r._baseApiUrl+e,i.headers=n,i.params=r._applyFields(t),r._checkForEmptyObjects(i),i=r._formatOptions(i)})}},{key:"makeRequest",value:function(e,t,o){var r=this;if((o=o||0)>this.requestRetryTimes)throw new Error("Exceeded retry count.");return this.reauth(e,t,o).then(function(n){return r._returnsOnlyOptions||t.returnsOnlyOptions?(n.upload&&(n.headers["Content-Type"]=void 0,delete n.upload),n):r.httpService.defaults&&t.upload?r._handleAngularFileUpload(r.httpService,n):r.httpService(n).catch(function(n){var i=n.status||n.response.status;if(void 0===i||i<=0)return r.supportsStorage&&!r.disableStorage&&window[r.storage].removeItem(f.default.BOX_TOKEN_STORAGE_KEY),r.makeRequest(e,t,o+1);throw n})})}}]),t}(c.default);t.default=d,e.exports=t.default}])});
//# sourceMappingURL=BoxSdk.map